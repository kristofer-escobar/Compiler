<!DOCTYPE HTML>
<html>
<head>
    <title>Compiler By Kristofer Escobar</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <script src="libraries/jquery-1.9.1.min.js"></script>
    <link rel="stylesheet" type="text/css" href="compiler.css" />
</head>
<body onload="init();">
    <span class="center"><h1><i class="whiteText">Kris' Compiler Project</i></h1></span>
    <pre class="whiteText">
                                                    Program       ::== Statement $
                                                    Statement     ::== P ( Expr ) 
                                                                  ::== Id = Expr
                                                                  ::== VarDecl
                                                                  ::== { StatementList }
                                                    StatementList ::== Statement StatementList 
                                                                  ::== ε
                                                    Expr          ::== IntExpr
                                                                  ::== CharExpr
                                                                  ::== Id
                                                    IntExpr       ::== digit op Expr
                                                                  ::== digit
                                                    CharExpr      ::== " CharList " CharList 
                                                                  ::== Char CharList
                                                                  ::== ε 
                                                    VarDecl       ::== Type Id
                                                    Type          ::== int | char
                                                    Id            ::== Char
                                                    Char          ::== a | b | c ... z
                                                    digit         ::== 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 0 
                                                    op            ::== + | -
    </pre>  
    <div class="center">
        <textarea id="taSourceCode" cols="82" rows="15" placeholder="Enter source code here."></textarea>
        <br>
    </div>
    <div class="buttons">
        <span class="whiteText">Click to compile.</span>
        <input type="button" id="btnCompile" class="button" value="Compile" onclick="btnCompile_click();"/>
        <div class="mode">
            Error Mode:
            <input name="mode" value="standard" checked="checked" onclick="setErrorMode('standard');" type="radio" id="standard">Standard
            <input name="mode" value="verbose" onclick="setErrorMode('verbose');" type="radio">Verbose
        </div>
    </div>
    <div class="center">
        <textarea id="taOutput" cols="82" rows="15" placeholder="Output will be shown here."></textarea>
        <br><br>
        <textarea id="taSymbolTable" cols="82" rows="10" placeholder="Symbol table will be shown here."></textarea>
    </div>
    <!-- Footer -->

    <!-- Client-side code down here, per the YSlow advice. 
    // (http://developer.yahoo.com/performance/rules.html#js_bottom) -->
    <script type="text/javascript" src="scripts/token.js"></script>
    <script type="text/javascript" src="scripts/identifier.js"></script>
    <script type="text/javascript" src="scripts/globals.js"></script>
    <script type="text/javascript" src="scripts/utils.js"></script>	
    <script type="text/javascript" src="scripts/lexer.js"></script>	
    <script type="text/javascript" src="scripts/parser.js"></script> 
    <script type="text/javascript">
    
    function btnCompile_click()
    {        
        // This is executed as a result of the usr pressing the 
        // "compile" button between the two text areas, above.  
        // Note the <input> element's event handler: onclick="btnCompile_click();
        init();
        putMessage("Compilation Started.");
        // Grab the tokens from the lexer . . .
        tokens = lex();
        //alert(getTokenKinds(tokens));
        if(tokens != null){
            var tokenString = getTokenValues(tokens);
        
            putMessage("Lexer found " + warningCount + " warning(s)" + " and " + errorCount + " error(s).");   
            
            // . . . and parse!
            if(!errorsFound)
            {
                putMessage("Lex returned [" + tokenString + "]");
                parse();   

                if(!errorsFound)
                {
                    document.getElementById("taSymbolTable").value += getSymbolTable() + "\n";
                }         
            }
            else
            {
                putMessage("Failed to parse due to lexical errors.");
            }
        }// End null check.
    }

    </script>
</body>
</html>
